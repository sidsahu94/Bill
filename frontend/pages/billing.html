<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Terminal - Bill Executive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#030712">
  <link rel="apple-touch-icon" href="/icons/icon-192.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <style>
    /* Table Overrides for Dark Luxury Theme */
    .table { color: var(--text-primary); border-color: var(--border-glass); }
    .table th { color: var(--text-secondary); border-bottom-color: var(--border-glass); font-size: 0.75rem; letter-spacing: 0.1em; }
    .table td { border-bottom-color: rgba(255,255,255,0.02); vertical-align: middle; }
    .table-hover tbody tr:hover { background-color: rgba(255,255,255,0.02); }
    
    /* Dark mode select styling */
    select.saas-input option { background-color: var(--bg-deep-space); color: var(--text-primary); }
  </style>
</head>
<body>
  <div id="navbar-placeholder"></div>
  
  <main class="container mt-4 mb-5 animate-enter" id="main">
    <div class="d-flex justify-content-between align-items-center mb-5">
      <h2 class="fw-bold m-0" style="color: var(--gold-metallic);">Transaction Terminal</h2>
      <div style="background: rgba(212, 175, 55, 0.1); border: 1px solid var(--border-gold); padding: 8px 16px; border-radius: 8px; color: var(--gold-metallic); font-family: monospace; letter-spacing: 0.05em;" id="invoiceNumberDisplay">
        INIT...
      </div>
    </div>

    <div class="saas-card mb-4">
      <h6 class="saas-label mb-4 text-gold">1. Client Designation</h6>
      <form id="billingHeader">
        <div class="row g-4">
          <div class="col-12 col-md-4">
            <label class="saas-label">Entity Registry</label>
            <select id="customerSelect" class="saas-input">
              <option value="">Standard Walk-in</option>
            </select>
          </div>
          <div class="col-12 col-md-4">
            <label class="saas-label">Tax ID (GSTIN)</label>
            <input id="customerGST" class="saas-input" readonly placeholder="Auto-populated" style="background: rgba(0,0,0,0.5);" />
          </div>
          <div class="col-12 col-md-4">
            <label class="saas-label">Registered Location</label>
            <input id="customerAddress" class="saas-input" readonly placeholder="Auto-populated" style="background: rgba(0,0,0,0.5);" />
          </div>
        </div>
      </form>
    </div>

    <div class="saas-card mb-4">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h6 class="saas-label m-0 text-gold">2. Asset Allocation</h6>
        <button type="button" class="saas-btn saas-btn-secondary py-1 px-3" style="font-size: 0.8rem;" id="addProductBtn">+ Append Row</button>
      </div>
      
      <div class="table-responsive">
        <table class="table table-hover" id="invoiceTable">
          <thead>
            <tr>
              <th scope="col" style="width: 35%">Asset Name</th>
              <th scope="col">Unit Price</th>
              <th scope="col">Tax %</th>
              <th scope="col" style="width: 10%">Vol</th>
              <th scope="col">Subtotal</th>
              <th scope="col">Total</th>
              <th scope="col"></th>
            </tr>
          </thead>
          <tbody id="invoiceTbody">
            </tbody>
        </table>
      </div>
    </div>

    <div class="saas-card mb-5" style="border-top: 4px solid var(--gold-metallic);">
      <h6 class="saas-label mb-4 text-gold">3. Settlement Protocol</h6>
      <div class="row g-4 align-items-center">
        
        <div class="col-6 col-md-4">
          <label class="saas-label">Concession</label>
          <div class="d-flex gap-2">
            <input id="discount" type="number" class="saas-input w-75" placeholder="0.00" min="0" step="0.01" />
            <select id="discountType" class="saas-input w-25 p-0 text-center">
              <option value="flat">₹</option>
              <option value="percentage">%</option>
            </select>
          </div>
        </div>

        <div class="col-6 col-md-4">
          <label class="saas-label">Capital Channel</label>
          <select id="paymentMethod" class="saas-input">
            <option value="UPI">Digital / UPI</option>
            <option value="Card">Card Wire</option>
            <option value="Cash">Physical Cash</option>
            <option value="Credit">Deferred Credit</option>
          </select>
        </div>

        <div class="col-12 col-md-4 text-md-end mt-4 mt-md-0">
          <p class="saas-label mb-1">Gross Settlement Amount</p>
          <h2 class="m-0" id="totalAmountDisplay" style="color: var(--emerald-hwb); font-family: monospace; font-size: 2.5rem;">₹0.00</h2>
          <input type="hidden" id="totalAmount" value="0">
        </div>
      </div>
    </div>

    <div class="d-flex justify-content-end gap-3">
      <button class="saas-btn saas-btn-secondary" id="printInvoiceBtn">Generate PDF Document</button>
      <button class="saas-btn saas-btn-primary px-5" id="saveInvoiceBtn">Execute Transaction</button>
    </div>
  </main>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js"></script>
  <script src="/js/pdfEngine.js"></script>
  <script src="/js/billing.js"></script>
  <script src="/js/navbar.js"></script>
  <script src="/js/pwa.js"></script>
</body>
</html>